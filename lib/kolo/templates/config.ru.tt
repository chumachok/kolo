dev_env = ENV["RACK_ENV"] == "development"

if dev_env
  require "logger"
  logger = Logger.new($stdout)
end

require "rack/unreloader"
Unreloader = Rack::Unreloader.new(subclasses: %w(Roda Sequel::Model), logger: logger, reload: dev_env) { App }
require_relative "models"
Unreloader.require("app.rb"){"App"}
run(dev_env ? Unreloader : App.freeze.app)